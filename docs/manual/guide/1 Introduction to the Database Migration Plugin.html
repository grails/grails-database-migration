<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>1 Introduction to the Database Migration Plugin 1.2</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1%20Introduction%20to%20the%20Database%20Migration%20Plugin.html"><strong>1</strong><span>Introduction to the Database Migration Plugin</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2%20Getting%20Started.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3%20Configuration.html"><strong>3</strong><span>Configuration</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/4%20General%20Usage.html"><strong>4</strong><span>General Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/5%20Groovy%20Changes.html"><strong>5</strong><span>Groovy Changes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/6%20Groovy%20Preconditions.html"><strong>6</strong><span>Groovy Preconditions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/7%20GORM%20Support.html"><strong>7</strong><span>GORM Support</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/8%20DbDoc%20Controller.html"><strong>8</strong><span>DbDoc Controller</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Grails Database Migration Plugin</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/2%20Getting%20Started.html"><strong>2</strong><span>Getting Started</span> >></a></div>
                


                <div class="project">
                    <h1>1 Introduction to the Database Migration Plugin - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Burt Beckwith</p>

                    <p><strong>Version:</strong> 1.2</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#1.1%20History"><strong>1.1</strong><span>History</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="1 Introduction to the Database Migration Plugin">1 Introduction to the Database Migration Plugin</h1>
The Database Migration plugin helps you manage database changes while developing Grails applications. The plugin uses the <a href="http://www.liquibase.org/" target="blank">Liquibase</a> library.<p class="paragraph"/>Using this plugin (and Liquibase in general) adds some structure and process to managing database changes. It will help avoid inconsistencies, communication issues, and other problems with ad-hoc approaches.<p class="paragraph"/>Database migrations are represented in text form, either using a Groovy DSL or native Liquibase XML, in one or more changelog files. This approach makes it natural to maintain the changelog files in source control and also works well with branches. Changelog files can include other changelog files, so often developers create hierarchical files organized with various schemes. One popular approach is to have a root changelog named changlog.groovy (or changelog.xml) and to include a changelog per feature/branch that includes multiple smaller changelogs. Once the feature is finished and merged into the main development tree/trunk the changelog files can either stay as they are or be merged into one large file. Use whatever approach makes sense for your applications, but keep in mind that there are many options available for changelog management.<p class="paragraph"/>Individual changes have an ID that should be globally unique, although they also include the username of the user making the change, making the combination of ID and username unique (although technically the ID, username, and changelog location are the "unique key").<p class="paragraph"/>As you make changes in your code (typically domain classes) that require changes in the database, you add a new change set to the changelog. Commit the code changes along with the changelog additions, and the other developers on your team will get both when they update from source control. Once they apply the new changes their code and development database will be in sync with your changes. Likewise when you deploy to a QA, a staging server, or production, you'll run the un-run changes that correspond to the code updates to being that environment's database in sync. Liquibase keeps track of previously executed changes so there's no need to think about what has and hasn't been run yet.<p class="paragraph"/><h4>Scripts</h4><p class="paragraph"/>Your primary interaction with the plugin will be using the provided scripts. For the most part these correspond to the many Liquibase commands that are typically executed directly from the commandline or with its Ant targets, but there are also a few Grails-specific scripts that take advantage of the information available from the GORM mappings.<p class="paragraph"/>All of the scripts start with <code>dbm-</code> to ensure that they're unique and don't clash with scripts from Grails or other plugins.<p class="paragraph"/>


<h2 id="1.1 History">1.1 History</h2>
<h4>History</h4>
<ul class="star">
<li>May 11, 2012</li>
<ul class="star">
<li>1.1 release</li>
<li><a href="http://jira.grails.org/secure/ReleaseNote.jspa?projectId=10092&amp;version=13112" target="blank">JIRA Issues</a></li>
</ul>
<li>August 17, 2011</li>
<ul class="star">
<li>1.0 release</li>
<li><a href="http://jira.grails.org/secure/ReleaseNote.jspa?projectId=10092&amp;version=12701" target="blank">JIRA Issues</a></li>
</ul>
<li>April 19, 2011</li>
<ul class="star">
<li>0.2.1 release</li>
</ul>
<li>February 13, 2011</li>
<ul class="star">
<li>0.2 release</li>
<ul class="star">
<li>One breaking change: the default migrations folder changed from grails-app/conf/migrations to grails-app/migrations</li>
</ul>
</ul>
<li>May 22, 2010</li>
<ul class="star">
<li>initial 0.1 release</li>
</ul></ul><p class="paragraph"/>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item next-right"><a href="../guide/2%20Getting%20Started.html"><strong>2</strong><span>Getting Started</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Diff Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Diff%20Scripts/dbm-diff.html">dbm-diff</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Diff%20Scripts/dbm-gorm-diff.html">dbm-gorm-diff</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Documentation Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Documentation%20Scripts/dbm-db-doc.html">dbm-db-doc</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Maintenance Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-changelog-sync-sql.html">dbm-changelog-sync-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-changelog-sync.html">dbm-changelog-sync</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-changelog-to-groovy.html">dbm-changelog-to-groovy</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-clear-checksums.html">dbm-clear-checksums</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-create-changelog.html">dbm-create-changelog</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-drop-all.html">dbm-drop-all</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-list-locks.html">dbm-list-locks</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-list-tags.html">dbm-list-tags</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-mark-next-changeset-ran.html">dbm-mark-next-changeset-ran</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-register-changelog.html">dbm-register-changelog</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-release-locks.html">dbm-release-locks</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-status.html">dbm-status</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-tag.html">dbm-tag</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Maintenance%20Scripts/dbm-validate.html">dbm-validate</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Rollback Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-future-rollback-sql.html">dbm-future-rollback-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-generate-changelog.html">dbm-generate-changelog</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-generate-gorm-changelog.html">dbm-generate-gorm-changelog</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback-count-sql.html">dbm-rollback-count-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback-count.html">dbm-rollback-count</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback-sql.html">dbm-rollback-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback-to-date-sql.html">dbm-rollback-to-date-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback-to-date.html">dbm-rollback-to-date</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Rollback%20Scripts/dbm-rollback.html">dbm-rollback</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Update Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Update%20Scripts/dbm-previous-changeset-sql.html">dbm-previous-changeset-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Update%20Scripts/dbm-update-count-sql.html">dbm-update-count-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Update%20Scripts/dbm-update-count.html">dbm-update-count</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Update%20Scripts/dbm-update-sql.html">dbm-update-sql</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Update%20Scripts/dbm-update.html">dbm-update</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>


<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16219500-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</body>
</html>
