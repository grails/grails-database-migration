<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Grails Database Migration Plugin</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Grails Database Migration Plugin</h1>
<div class="details">
<span id="revnumber">version 4.0.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction to the Database Migration Plugin</a></li>
<li><a href="#gettingStarted">2. Getting Started</a></li>
<li><a href="#configuration">3. Configuration</a></li>
<li><a href="#generalUsage">4. General Usage</a>
<ul class="sectlevel2">
<li><a href="#_autorun_on_start">4.1. Autorun on start</a></li>
</ul>
</li>
<li><a href="#groovyChanges">5. Groovy Changes</a>
<ul class="sectlevel2">
<li><a href="#_general_format">5.1. General format</a></li>
<li><a href="#_available_variables">5.2. Available variables</a></li>
</ul>
</li>
<li><a href="#groovyPreconditions">6. Groovy Preconditions</a>
<ul class="sectlevel2">
<li><a href="#_general_format_2">6.1. General format</a></li>
<li><a href="#_available_variables_2">6.2. Available variables</a></li>
<li><a href="#_utility_methods">6.3. Utility methods</a></li>
</ul>
</li>
<li><a href="#gorm">7. GORM Support</a></li>
<li><a href="#dbdoc">8. DbDoc Controller</a></li>
<li><a href="#reference">9. Reference</a>
<ul class="sectlevel2">
<li><a href="#ref-diff-scripts">9.1. Diff Scripts</a></li>
<li><a href="#ref-documentation-scripts">9.2. Documentation Scripts</a></li>
<li><a href="#ref-maintenance-scripts">9.3. Maintenance Scripts</a></li>
<li><a href="#ref-rollback-scripts">9.4. Rollback Scripts</a></li>
<li><a href="#ref-update-scripts">9.5. Update Scripts</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction">1. Introduction to the Database Migration Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Database Migration plugin helps you manage database changes while developing Grails applications. The plugin uses the <a href="http://www.liquibase.org/">Liquibase</a> library.</p>
</div>
<div class="paragraph">
<p>Using this plugin (and Liquibase in general) adds some structure and process to managing database changes. It will help avoid inconsistencies, communication issues, and other problems with ad-hoc approaches.</p>
</div>
<div class="paragraph">
<p>Database migrations are represented in text form, either using a Groovy DSL or native Liquibase XML, in one or more changelog files. This approach makes it natural to maintain the changelog files in source control and also works well with branches. Changelog files can include other changelog files, so often developers create hierarchical files organized with various schemes. One popular approach is to have a root changelog named changlog.groovy (or changelog.xml) and to include a changelog per feature/branch that includes multiple smaller changelogs. Once the feature is finished and merged into the main development tree/trunk the changelog files can either stay as they are or be merged into one large file. Use whatever approach makes sense for your applications, but keep in mind that there are many options available for changelog management.</p>
</div>
<div class="paragraph">
<p>Individual changes have an ID that should be globally unique, although they also include the username of the user making the change, making the combination of ID and username unique (although technically the ID, username, and changelog location are the "unique key").</p>
</div>
<div class="paragraph">
<p>As you make changes in your code (typically domain classes) that require changes in the database, you add a new change set to the changelog. Commit the code changes along with the changelog additions, and the other developers on your team will get both when they update from source control. Once they apply the new changes their code and development database will be in sync with your changes. Likewise when you deploy to a QA, a staging server, or production, you&#8217;ll run the un-run changes that correspond to the code updates to being that environment&#8217;s database in sync. Liquibase keeps track of previously executed changes so there&#8217;s no need to think about what has and hasn&#8217;t been run yet.</p>
</div>
<div class="paragraph">
<p><strong>Scripts</strong></p>
</div>
<div class="paragraph">
<p>Your primary interaction with the plugin will be using the provided scripts. For the most part these correspond to the many Liquibase commands that are typically executed directly from the commandline or with its Ant targets, but there are also a few Grails-specific scripts that take advantage of the information available from the GORM mappings.</p>
</div>
<div class="paragraph">
<p>All the scripts start with <code>dbm-</code> to ensure that they&#8217;re unique and don&#8217;t clash with scripts from Grails or other plugins.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gettingStarted">2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>The first step is to add a dependency for the plugin in <code>build.gradle</code>:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
   dependencies {
      ...
      classpath 'org.grails.plugins:database-migration:4.0.0-SNAPSHOT'
   }
}

dependencies {
   ...
     implementation 'org.grails.plugins:database-migration:4.0.0-SNAPSHOT'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also recommended to add a direct dependency to liquibase because Spring Boot overrides the one provided by this plugin</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
   ...
     implementation 'org.liquibase:liquibase-core:4.6.1'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should also tell Gradle about the migrations folder. If using Grails 4, make sure the configuration below is BEFORE the
<code>dependencies</code> configuration, so that the <code>sourceSets</code> declaration takes effect.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">sourceSets {
    main {
        resources {
            srcDir 'grails-app/migrations'
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Typical initial workflow</strong></p>
</div>
<div class="paragraph">
<p>Next you&#8217;ll need to create an initial changelog. You can use Liquibase XML or the plugin&#8217;s Groovy DSL for individual files. You can even mix and match; Groovy files can include other Groovy files and Liquibase XML files (but XML files can&#8217;t include Groovy files).</p>
</div>
<div class="paragraph">
<p>Depending on the state of your database and code, you have two options; either create a changelog from the database or create it from your domain classes. The decision tends to be based on whether you prefer to design the database and adjust the domain classes to work with it, or to design your domain classes and use Hibernate to create the corresponding database structure.</p>
</div>
<div class="paragraph">
<p>To create a changelog from the database, use the <a href="#ref-rollback-scripts-dbm-generate-changelog">dbm-generate-changelog</a> script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-changelog changelog.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-changelog changelog.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>depending on whether you prefer the Groovy DSL or XML. The filename is relative to the changelog base folder, which defaults to <code>grails-app/migrations</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you use the XML format (or use a non-default Groovy filename), be sure to change the name of the file in <code>application.groovy</code> so <code>dbm-update</code> and other scripts find the file:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.changelogFileName = <span class="string"><span class="delimiter">'</span><span class="content">changelog.xml</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the database is already correct, run the <a href="#ref-maintenance-scripts-dbm-changelog-sync">dbm-changelog-sync</a> script to record that the changes have already been applied:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-changelog-sync</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running this script is primarily a no-op except that it records the execution(s) in the Liquibase DATABASECHANGELOG table.</p>
</div>
<div class="paragraph">
<p>To create a changelog from your domain classes, use the <a href="#ref-rollback-scripts-dbm-generate-gorm-changelog">dbm-generate-gorm-changelog</a> script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-gorm-changelog changelog.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-gorm-changelog changelog.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you haven&#8217;t created the database yet, run the <a href="#ref-update-scripts-dbm-update">dbm-update</a> script to create the corresponding tables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the <a href="#ref-maintenance-scripts-dbm-changelog-sync">dbm-changelog-sync</a> script if the database is already in sync with your code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-changelog-sync</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Source control</strong></p>
</div>
<div class="paragraph">
<p>Now you can commit the changelog and the corresponding application code to source control. Other developers can then update and synchronize their databases, and start doing migrations themselves.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">3. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few configuration options for the plugin. All configurations are prefixed with <code>grails.plugin.databasemigration</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changelogLocation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grails-app/migrations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the folder containing the main changelog file (which can include one or more other files)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changelogFileName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changelog.groovy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the name of the main changelog file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">changelogProperties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a map of properties to use for property substitution in Groovy DSL changelogs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">contexts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbDocLocation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target/dbdoc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the directory where the output from the <a href="#ref-documentation-scripts-dbm-db-doc">dbm-db-doc</a> script is written</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbDocController.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code> in dev mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether the /dbdoc/ url is accessible at runtime</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dropOnStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <code>true</code> then drops all tables before auto-running migrations (if updateOnStart is true)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateOnStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <code>true</code> then changesets from the specified list of names will be run at startup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateOnStartFileName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the file name (relative to <code>changelogLocation</code>) to run at startup if <code>updateOnStart</code> is <code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateOnStartDefaultSchema</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the default schema to use when running auto-migrate on start</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateOnStartContexts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">updateAllOnStart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if <code>true</code> then changesets from the specified list of names will be run at startup for all dataSources. Useful for Grails Multitenancy with Multiple Databases (same db schema)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">autoMigrateScripts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<em>RunApp</em>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the scripts when running auto-migrate. Useful to run auto-migrate during test phase with: [<em>RunApp</em>, <em>TestApp</em>]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">excludeObjects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-delimited list of database object names to ignore while performing a dbm-gorm-diff or dbm-generate-gorm-changelog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">includeObjects</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-delimited list of database object names to look for while performing a dbm-gorm-diff or dbm-generate-gorm-changelog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">databaseChangeLogTableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>databasechangelog</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the Liquibase changelog record table name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">databaseChangeLogLockTableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>databasechangeloglock</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the Liquibase lock table name</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All the above configs can be used for multiple datasources
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Multiple DataSource Example:</strong></p>
</div>
<div class="paragraph">
<p>If secondary dataSource named "second" is configured in application.yml</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">dataSource</span>:
    <span class="key">pooled</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">jmxExport</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">driverClassName</span>: <span class="string"><span class="content">org.h2.Driver</span></span>
    <span class="key">username</span>: <span class="string"><span class="content">sa</span></span>
    <span class="key">password</span>:
    <span class="key">dbCreate</span>: <span class="string"><span class="content">none</span></span>
    <span class="key">url</span>: <span class="string"><span class="content">jdbc:h2:file:./multipleFirstDb</span></span>
    <span class="key">logSql</span>: <span class="string"><span class="content">true</span></span>
    <span class="key">formatSql</span>: <span class="string"><span class="content">true</span></span>
<span class="key">dataSources</span>:
    <span class="key">second</span>:
        <span class="key">pooled</span>: <span class="string"><span class="content">true</span></span>
        <span class="key">jmxExport</span>: <span class="string"><span class="content">true</span></span>
        <span class="key">driverClassName</span>: <span class="string"><span class="content">org.h2.Driver</span></span>
        <span class="key">username</span>: <span class="string"><span class="content">sa</span></span>
        <span class="key">password</span>:
        <span class="key">dbCreate</span>: <span class="string"><span class="content">none</span></span>
        <span class="key">url</span>: <span class="string"><span class="content">jdbc:h2:file:./multipleSecondDb</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration for this data source would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.reports.updateOnStart = <span class="predefined-constant">true</span>
grails.plugin.databasemigration.reports.changelogFileName = changelog-second.groovy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration for all data sources with same db schema would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.updateAllOnStart = <span class="predefined-constant">true</span>
grails.plugin.databasemigration.changelogFileName = changelog.groovy</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generalUsage">4. General Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After creating the initial changelog, the typical workflow will be along the lines of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>make domain class changes that affect the schema</p>
</li>
<li>
<p>add changes to the changelog for them</p>
</li>
<li>
<p>backup your database in case something goes wrong</p>
</li>
<li>
<p>run <code>grails dbm-update</code> to update your development environment (or wherever you&#8217;re applying the changes)</p>
</li>
<li>
<p>check the updated domain class(es) and changelog(s) into source control</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When running migration scripts on non-development databases, it&#8217;s important that you backup the database before running the migration in case anything goes wrong. You could also make a copy of the database and run the script against that, and if there&#8217;s a problem the real database will be unaffected.</p>
</li>
<li>
<p>Setting the dbCreate setting to "none" is recommended when executing the dbm migration commands. Otherwise you might run into troubles and the commands could not be executed.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To create the changelog additions, you can either manually create the changes or with the <a href="#ref-diff-scripts-dbm-gorm-diff">dbm-gorm-diff</a> script (you can also use the <a href="#ref-diff-scripts-dbm-diff">dbm-diff</a> script but it&#8217;s far less convenient and requires a 2nd temporary database).</p>
</div>
<div class="paragraph">
<p>You have a few options with <code>dbm-gorm-diff</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dbm-gorm-diff</code> will dump to the console if no filename is specified, so you can copy/paste from there</p>
</li>
<li>
<p>if you include the <code>--add</code> parameter when running the script with a filename it will register an include for the filename in the main changelog for you</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Regardless of which approach you use, be sure to inspect generated changes and adjust as necessary.</p>
</div>
<div class="sect2">
<h3 id="_autorun_on_start">4.1. Autorun on start</h3>
<div class="paragraph">
<p>Since Liquibase maintains a record of changes that have been applied, you can avoid manually updating the database by taking advantage of the plugin&#8217;s auto-run feature. By default this is disabled, but you can enable it by adding</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.updateOnStart = <span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to application.groovy. In addition you must specify the file containing changes; specify the name using the <code>updateOnStartFileName</code> property, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.updateOnStartFileName = <span class="string"><span class="delimiter">'</span><span class="content">changelog.groovy</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Since changelogs can contain changelogs you&#8217;ll most often just specify the root changelog, changelog.groovy by convention. Any changes that haven&#8217;t been executed (in the specified file(s) or files included by them) will be run in the order specified.</p>
</div>
<div class="paragraph">
<p>You may optionally limit the plugin&#8217;s auto-run feature to run only specific contexts. If this configuration parameter is empty or omitted, all contexts will be run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.updateOnStartContexts = [<span class="string"><span class="delimiter">'</span><span class="content">context1,context2</span><span class="delimiter">'</span></span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can be notified when migration are run (for example to do some work before and/or after the migrations execute) by registering a "callback" class as a Spring bean. The class can have any name and package and doesn&#8217;t have to implement any interface since its methods will be called using Groovy duck-typing.</p>
</div>
<div class="paragraph">
<p>The bean name is "migrationCallbacks" and there are currently three callback methods supported (all are optional):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>beforeStartMigration</code> will be called (if it exists) for each datasource before any migrations have run; the method will be passed a single argument, the Liquibase <code>Database</code> for that datasource</p>
</li>
<li>
<p><code>onStartMigration</code> will be called (if it exists) for each migration script; the method will be passed three arguments, the Liquibase <code>Database</code>, the <code>Liquibase</code> instance, and the changelog file name</p>
</li>
<li>
<p><code>afterMigrations</code> will be called (if it exists) for each datasource after all migrations have run; the method will be passed a single argument, the Liquibase <code>Database</code> for that datasource</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example class will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> com.mycompany.myapp

<span class="keyword">import</span> <span class="include">liquibase.Liquibase</span>
<span class="keyword">import</span> <span class="include">liquibase.database.Database</span>

<span class="type">class</span> <span class="class">MigrationCallbacks</span> {

   <span class="type">void</span> beforeStartMigration(Database Database) {
      ...
   }

   <span class="type">void</span> onStartMigration(Database database, Liquibase liquibase, <span class="predefined-type">String</span> changelogName) {
      ...
   }

   <span class="type">void</span> afterMigrations(Database Database) {
      ...
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Register it in resources.groovy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">com.mycompany.myapp.MigrationCallbacks</span>

beans = {
   migrationCallbacks(MigrationCallbacks)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="groovyChanges">5. Groovy Changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the built-in Liquibase changes (see <a href="http://www.liquibase.org/manual/home">the documentation</a> for what&#8217;s available) you can also make database changes using Groovy code (as long as you&#8217;re using the Groovy DSL file format). These changes use the <code>grailsChange</code> tag name and are contained in a <code>changeSet</code> tag like standard built-in tags.</p>
</div>
<div class="paragraph">
<p>There are four supported inner tags and two callable methods (to override the default confirmation message and checksum value).</p>
</div>
<div class="sect2">
<h3 id="_general_format">5.1. General format</h3>
<div class="paragraph">
<p>This is the general format of a Groovy-based change; all inner tags and methods are optional:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">databaseChangeLog = {

   changeSet(<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">...</span><span class="delimiter">'</span></span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">...</span><span class="delimiter">'</span></span>) {

      grailsChange {
         init {
             <span class="comment">// arbitrary initialization code; note that no</span>
             <span class="comment">// database or connection is available</span>
         }

         validate {
            <span class="comment">// can call warn(String message) to log a warning</span>
            <span class="comment">// or error(String message) to stop processing</span>
         }

         change {
            <span class="comment">// arbitrary code; make changes directly and/or return a</span>
            <span class="comment">// SqlStatement using the sqlStatement(SqlStatement sqlStatement)</span>
            <span class="comment">// method or multiple with sqlStatements(List sqlStatements)</span>

            confirm <span class="string"><span class="delimiter">'</span><span class="content">change confirmation message</span><span class="delimiter">'</span></span>
         }

         rollback {
            <span class="comment">// arbitrary code; make rollback changes directly and/or</span>
            <span class="comment">// return a SqlStatement using the sqlStatement(SqlStatement sqlStatement)</span>
            <span class="comment">// method or multiple with sqlStatements(List sqlStatements)</span>

            confirm <span class="string"><span class="delimiter">'</span><span class="content">rollback confirmation message</span><span class="delimiter">'</span></span>
         }

         confirm <span class="string"><span class="delimiter">'</span><span class="content">confirmation message</span><span class="delimiter">'</span></span>

         checkSum <span class="string"><span class="delimiter">'</span><span class="content">override value for checksum</span><span class="delimiter">'</span></span>
      }

   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_available_variables">5.2. Available variables</h3>
<div class="paragraph">
<p>These variables are available throughout the change closure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>changeSet</code> - the current Liquibase <code>ChangeSet</code> instance</p>
</li>
<li>
<p><code>resourceAccessor</code> - the current Liquibase <code>ResourceAccessor</code> instance</p>
</li>
<li>
<p><code>ctx</code> - the Spring <code>ApplicationContext</code></p>
</li>
<li>
<p><code>application</code> - the <code>GrailsApplication</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>change</code> and <code>rollback</code> closures also have the following available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>database</code> - the current Liquibase <code>Database</code> instance</p>
</li>
<li>
<p><code>databaseConnection</code> - the current Liquibase <code>DatabaseConnection</code> instance, which is a wrapper around the JDBC <code>Connection</code> (but doesn&#8217;t implement the <code>Connection</code> interface)</p>
</li>
<li>
<p><code>connection</code> - the real JDBC <code>Connection</code> instance (a shortcut for <code>database.connection.wrappedConnection</code>)</p>
</li>
<li>
<p><code>sql</code> - a <code>groovy.sql.Sql</code> instance which uses the current <code>connection</code> and can be used for arbitrary queries and updates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>init</strong></p>
</div>
<div class="paragraph">
<p>This is where any optional initialization should happen. You can&#8217;t access the database from this closure.</p>
</div>
<div class="paragraph">
<p><strong>validate</strong></p>
</div>
<div class="paragraph">
<p>If there are any necessary validation checks before executing changes or rollbacks they should be done here. You can log warnings by calling <code>warn(String message)</code> and stop processing by calling <code>error(String message)</code>. It may make more sense to use one or more <code>preCondition</code>s instead of directly validating here.</p>
</div>
<div class="paragraph">
<p><strong>change</strong></p>
</div>
<div class="paragraph">
<p>All migration changes are done in the <code>change</code> closure. You can make changes directly (using the <code>sql</code> instance or the <code>connection</code>) and/or return one or more <code>SqlStatement</code>s. You can call <code>sqlStatement(SqlStatement statement)</code> multiple times to register instances to be run. You can also call the <code>sqlStatements(statements)</code> method with an array or list of instances to be run.</p>
</div>
<div class="paragraph">
<p><strong>rollback</strong></p>
</div>
<div class="paragraph">
<p>All rollback changes are done in the <code>rollback</code> closure. You can make changes directly (using the <code>sql</code> instance or the <code>connection</code>) and/or return one or more <code>SqlStatement</code>s. You can call <code>sqlStatement(SqlStatement statement)</code> multiple times to register instances to be run. You can also call the <code>sqlStatements(statements)</code> method with an array or list of instances to be run.</p>
</div>
<div class="paragraph">
<p><strong>confirm</strong></p>
</div>
<div class="paragraph">
<p>The <code>confirm(String message)</code> method is used to specify the confirmation message to be shown. The default is "Executed GrailsChange" and it can be overridden in the <code>change</code> or <code>rollback</code> closures to allow phase-specific messages or outside of both closures to use the same message for the update and rollback phase.</p>
</div>
<div class="paragraph">
<p><strong>checkSum</strong></p>
</div>
<div class="paragraph">
<p>The checksum for the change will be generated automatically, but if you want to override the value that gets hashed you can specify it with the <code>checkSum(String value)</code> method.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="groovyPreconditions">6. Groovy Preconditions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the built-in Liquibase preconditions (see <a href="http://www.liquibase.org/manual/preconditions">the documentation</a> for what&#8217;s available) you can also specify preconditions using Groovy code (as long as you&#8217;re using the Groovy DSL file format). These changes use the <code>grailsPrecondition</code> tag name and are contained in the <code>databaseChangeLog</code> tag or in a <code>changeSet</code> tag like standard built-in tags.</p>
</div>
<div class="sect2">
<h3 id="_general_format_2">6.1. General format</h3>
<div class="paragraph">
<p>This is the general format of a Groovy-based precondition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">databaseChangeLog = {

   changeSet(<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">...</span><span class="delimiter">'</span></span>, <span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">...</span><span class="delimiter">'</span></span>) {

      preConditions {

         grailsPrecondition {

            check {

               <span class="comment">// use an assertion</span>
               <span class="keyword">assert</span> x == x

               <span class="comment">// use an assertion with an error message</span>
               <span class="keyword">assert</span> y == y : <span class="string"><span class="delimiter">'</span><span class="content">value cannot be 237</span><span class="delimiter">'</span></span>

               <span class="comment">// call the fail method</span>
               <span class="keyword">if</span> (x != x) {
                  fail <span class="string"><span class="delimiter">'</span><span class="content">x != x</span><span class="delimiter">'</span></span>
               }

               <span class="comment">// throw an exception (the fail method is preferred)</span>
               <span class="keyword">if</span> (y != y) {
                  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="exception">RuntimeException</span>(<span class="string"><span class="delimiter">'</span><span class="content">y != y</span><span class="delimiter">'</span></span>)
               }
            }

         }

      }
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see there are a few ways to indicate that a precondition wasn&#8217;t met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use a simple assertion</p>
</li>
<li>
<p>use an assertion with a message</p>
</li>
<li>
<p>call the <code>fail(String message)</code> method (throws a <code>PreconditionFailedException</code>)</p>
</li>
<li>
<p>throw an exception (shouldn&#8217;t be necessary - use <code>assert</code> or <code>fail()</code> instead)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_available_variables_2">6.2. Available variables</h3>
<div class="ulist">
<ul>
<li>
<p><code>database</code> - the current Liquibase <code>Database</code> instance</p>
</li>
<li>
<p><code>databaseConnection</code> - the current Liquibase <code>DatabaseConnection</code> instance, which is a wrapper around the JDBC <code>Connection</code> (but doesn&#8217;t implement the <code>Connection</code> interface)</p>
</li>
<li>
<p><code>connection</code> - the real JDBC <code>Connection</code> instance (a shortcut for <code>database.connection.wrappedConnection</code>)</p>
</li>
<li>
<p><code>sql</code> - a <code>groovy.sql.Sql</code> instance which uses the current <code>connection</code> and can be used for arbitrary queries and updates</p>
</li>
<li>
<p><code>resourceAccessor</code> - the current Liquibase <code>ResourceAccessor</code> instance</p>
</li>
<li>
<p><code>ctx</code> - the Spring <code>ApplicationContext</code></p>
</li>
<li>
<p><code>application</code> - the <code>GrailsApplication</code></p>
</li>
<li>
<p><code>changeSet</code> - the current Liquibase <code>ChangeSet</code> instance</p>
</li>
<li>
<p><code>changeLog</code> - the current Liquibase <code>DatabaseChangeLog</code> instance</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_utility_methods">6.3. Utility methods</h3>
<div class="ulist">
<ul>
<li>
<p><code>createDatabaseSnapshotGenerator()</code> - retrieves the <code>DatabaseSnapshotGenerator</code> for the current <code>Database</code></p>
</li>
<li>
<p><code>createDatabaseSnapshot(String schemaName = null)</code> - creates a <code>DatabaseSnapshot</code> for the current <code>Database</code> (and schema if specified)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gorm">7. GORM Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin&#8217;s support for GORM is one feature that differentiates it from using Liquibase directly. Typically, when using Liquibase you make changes to a database yourself, and then create changesets manually, or use a diff script to compare your updated database to one that hasn&#8217;t been updated yet. This is a decent amount of work and is rather error-prone. It&#8217;s easy to forget some changes that aren&#8217;t required but help performance, for example creating an index on a foreign key when using MySQL.</p>
</div>
<div class="paragraph">
<p><strong>create-drop, create, and update</strong></p>
</div>
<div class="paragraph">
<p>On the other end of the spectrum, Hibernate&#8217;s <code>create-drop</code> mode (or <code>create</code>) will create a database that matches your domain model, but it&#8217;s destructive since all previous data is lost when it runs. This works well in the very early stages of development but gets frustrating quickly. Unfortunately Hibernate&#8217;s <code>update</code> mode seems like a good compromise since it only makes changes to your existing schema, but it&#8217;s very limited in what it will do. It&#8217;s very pessimistic and won&#8217;t make any changes that could lose data. So it will add new tables and columns, but won&#8217;t drop anything. If you remove a not-null domain class property you&#8217;ll find you can&#8217;t insert anymore since the column is still there. And it will create not-null columns as nullable since otherwise existing data would be invalid. It won&#8217;t even widen a column e.g. from <code>VARCHAR(100)</code> to <code>VARCHAR(200)</code>.</p>
</div>
<div class="paragraph">
<p><strong>dbm-gorm-diff</strong></p>
</div>
<div class="paragraph">
<p>The plugin provides a script that will compare your GORM current domain model with a database that you specify, and the result is a Liquibase changeset - <code>dbm-gorm-diff</code>. This is the same changeset you would get if you exported your domain model to a scratch database and diffed it with the other database, but it&#8217;s more convenient.</p>
</div>
<div class="paragraph">
<p>So a good workflow would be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>make whatever domain class changes you need (add new ones, delete unneeded ones, add/change/remove properties, etc.)</p>
</li>
<li>
<p>once your tests pass, and you&#8217;re ready to commit your changes to source control, run the script to generate the changeset that will bring your database back in line with your code</p>
</li>
<li>
<p>add the changeset to an existing changelog file, or use the <code>include</code> tag to include the whole file</p>
</li>
<li>
<p>run the changeset on your functional test database</p>
</li>
<li>
<p>assuming your functional tests pass, check everything in as one commit</p>
</li>
<li>
<p>the other members of your team will get both the code and database changes when they next update, and will know to run the update script to sync their database with the latest code</p>
</li>
<li>
<p>once you&#8217;re ready to deploy to QA for testing (or staging or production), you can run all the un-run changes since the last deployment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>dbm-generate-gorm-changelog</strong></p>
</div>
<div class="paragraph">
<p>The <a href="#ref-rollback-scripts-dbm-generate-gorm-changelog">dbm-generate-gorm-changelog</a> script is useful for when you want to switch from <code>create-drop</code> mode to doing proper migrations. It&#8217;s not very useful if you already have a database that&#8217;s in sync with your code, since you can just use the <a href="#ref-rollback-scripts-dbm-generate-changelog">dbm-generate-changelog</a> script that creates a changelog from your database.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dbdoc">8. DbDoc Controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <a href="#ref-documentation-scripts-dbm-db-doc">dbm-db-doc</a> script to generate static HTML files to view changelog information, but another option is to use the <code>DbDocController</code> at runtime. By default this controller is mapped to <code>/appname/dbdoc/</code> but this can be customized with <code>UrlMappings</code> like any controller.</p>
</div>
<div class="paragraph">
<p>You probably don&#8217;t want to expose this information to all of your application&#8217;s users so by default the controller is only enabled in the development environment. But you can enable or disable it for any environment in <code>application.groovy</code> with the <code>dbDocController.enabled</code> config option. For example to enable for all environments (be sure to guard the URL with a security plugin in prod):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails.plugin.databasemigration.dbDocController.enabled = <span class="predefined-constant">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or to enable in the production environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">environments {
   production {
      grails.plugin.databasemigration.dbDocController.enabled = <span class="predefined-constant">true</span>
   }
   ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reference">9. Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ref-diff-scripts">9.1. Diff Scripts</h3>
<div class="sect3">
<h4 id="ref-diff-scripts-dbm-diff">9.1.1. dbm-diff</h4>
<div class="sect4">
<h5 id="_purpose">Purpose</h5>
<div class="paragraph">
<p>Compares two databases and creates a changelog that will make the changes required to bring them into sync.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description">Description</h5>
<div class="paragraph">
<p>Executes against the database configured in <code>application.[yml|groovy]</code>  for the current environment (defaults to <code>dev</code>) and another configured datasource in <code>application.[yml|groovy]</code>.</p>
</div>
<div class="paragraph">
<p>If a filename parameter is specified then the output will be written to the named file, otherwise it will be written to the console. If the filename ends with .groovy a Groovy DSL file will be created, otherwise a standard XML file will be created.</p>
</div>
<div class="paragraph">
<p>File are written to the migrations folder, so specify the filename relative to the migrations folder (<code>grails-app/migrations</code> by default).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-diff &lt;&lt;otherEnv&gt;&gt; &lt;&lt;filename&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt; --add</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>otherEnv</code> - The name of the environment to compare to</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>add</code> - If specified add an include in the root changelog file referencing the new file</p>
</li>
<li>
<p><code>dataSource</code> - If provided will run the script for the specified dataSource. Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-diff <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-diff-scripts-dbm-gorm-diff">9.1.2. dbm-gorm-diff</h4>
<div class="sect4">
<h5 id="_purpose_2">Purpose</h5>
<div class="paragraph">
<p>Diffs GORM classes against a database and generates a changelog XML or Groovy DSL file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_2">Description</h5>
<div class="paragraph">
<p>Creates a Groovy DSL file if the filename is specified and it ends with .groovy. If another extension is specified it creates a standard Liquibase XML file, and if no filename is specified it writes to the console.</p>
</div>
<div class="paragraph">
<p>File are written to the migrations folder, so specify the filename relative to the migrations folder (<code>grails-app/migrations</code> by default).</p>
</div>
<div class="paragraph">
<p>Similar to <a href="#ref-diff-scripts-dbm-diff">dbm-diff</a> but diffs the current configuration based on the application&#8217;s domain classes with the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Doesn&#8217;t modify any existing files - you need to manually merge the output into the changeset along with any necessary modifications.</p>
</div>
<div class="paragraph">
<p>You can configure database objects to be ignored by this script - either in the GORM classes or in the target database. For example you may want domain objects that are transient, or you may have externally-managed tables, keys, etc. that you want left alone by the diff script. The configuration name for these ignored objects is <code>grails.plugin.databasemigration.ignoredObjects</code>, whose value is a list of strings.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-gorm-diff &lt;&lt;filename&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt; --add</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>add</code> - if specified add an include in the root changelog file referencing the new file</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-gorm-diff <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-documentation-scripts">9.2. Documentation Scripts</h3>
<div class="sect3">
<h4 id="ref-documentation-scripts-dbm-db-doc">9.2.1. dbm-db-doc</h4>
<div class="sect4">
<h5 id="_purpose_3">Purpose</h5>
<div class="paragraph">
<p>Generates Javadoc-like documentation based on current database and change log.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_3">Description</h5>
<div class="paragraph">
<p>Writes to the folder specified by the <code>destination</code> parameter, or to the <code>grails.plugin.databasemigration.dbDocLocation</code> configuration option (defaults to <code>target/dbdoc</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-db-doc &lt;&lt;destination&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>destination</code> - The path to write to</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-db-doc <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-maintenance-scripts">9.3. Maintenance Scripts</h3>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-add-migration">9.3.1. dbm-add-migration</h4>
<div class="sect4">
<h5 id="_purpose_4">Purpose</h5>
<div class="paragraph">
<p>Adds a template migration file to your project and to the changelog file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_4">Description</h5>
<div class="paragraph">
<p>This script provides a template in which to place your migration behaviour code, whether
Grails code or raw SQL.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-add-migration &lt;&lt;migrationName&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>migrationName</code> - The name of the migration - will be used as a filename and the default migration id.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This script only supports .groovy-style migrations at the moment.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-changelog-sync-sql">9.3.2. dbm-changelog-sync-sql</h4>
<div class="sect4">
<h5 id="_purpose_5">Purpose</h5>
<div class="paragraph">
<p>Writes the SQL that will mark all changes as executed in the database to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_5">Description</h5>
<div class="paragraph">
<p>Generates the SQL statements for the Liquibase <code>DATABASECHANGELOG</code> control table.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-changelog-sync-sql &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-changelog-sync <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>
the suffix of <code>reports</code> will be used as the parameter value.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-changelog-sync">9.3.3. dbm-changelog-sync</h4>
<div class="sect4">
<h5 id="_purpose_6">Purpose</h5>
<div class="paragraph">
<p>Mark all changes as executed in the database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_6">Description</h5>
<div class="paragraph">
<p>Registers all changesets as having been run in the Liquibase control table. This is useful when the changes have already been applied, for example if you&#8217;ve just created a changelog from your database using the <a href="#ref-rollback-scripts-dbm-generate-changelog">dbm-generate-changelog</a> script.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-changelog-sync --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - If provided will run the script for the specified dataSource. Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-changelog-sync <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-changelog-to-groovy">9.3.4. dbm-changelog-to-groovy</h4>
<div class="sect4">
<h5 id="_purpose_7">Purpose</h5>
<div class="paragraph">
<p>Converts a Liquibase XML changelog file to a Groovy DSL file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_7">Description</h5>
<div class="paragraph">
<p>If the Groovy file name isn&#8217;t specified the name and location will be the same as the original XML file with a .groovy extension.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-changelog-to-groovy [xml_file_name] [groovy_file_name]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>xml_file_name</code> - The name and path of the XML file to convert</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>groovy_file_name</code> - The name and path of the Groovy file</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-clear-checksums">9.3.5. dbm-clear-checksums</h4>
<div class="sect4">
<h5 id="_purpose_8">Purpose</h5>
<div class="paragraph">
<p>Removes current checksums from database. On next run checksums will be recomputed.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_8">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-clear-checksums --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-clear-checksums  <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-create-changelog">9.3.6. dbm-create-changelog</h4>
<div class="sect4">
<h5 id="_purpose_9">Purpose</h5>
<div class="paragraph">
<p>Creates an empty changelog file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_9">Description</h5>
<div class="paragraph">
<p>Creates a new empty file instead of generating the file from the database (using <a href="#ref-rollback-scripts-dbm-generate-changelog">dbm-generate-changelog</a>) or your GORM classes (using <a href="#ref-rollback-scripts-dbm-generate-gorm-changelog">dbm-generate-gorm-changelog</a>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-create-changelog &lt;&lt;filename&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource creating a file named <code>changelog-&lt;&lt;dataSource&gt;&gt;.groovy</code> if a <code>filename</code> is not given. Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-create-changelog <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-drop-all">9.3.7. dbm-drop-all</h4>
<div class="sect4">
<h5 id="_purpose_10">Purpose</h5>
<div class="paragraph">
<p>Drops all database objects owned by the user.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_10">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-drop-all &lt;&lt;schemaNames&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>schemaNames</code> - A comma-delimited list of schema names to use</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use if the <code>schemaNames</code> parameter isn&#8217;t present</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-drop-all <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-list-locks">9.3.8. dbm-list-locks</h4>
<div class="sect4">
<h5 id="_purpose_11">Purpose</h5>
<div class="paragraph">
<p>Lists who currently has locks on the database changelog to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_11">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-list-locks &lt;&lt;filename&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-list-locks <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-list-tags">9.3.9. dbm-list-tags</h4>
<div class="sect4">
<h5 id="_purpose_12">Purpose</h5>
<div class="paragraph">
<p>Lists the tags in the current database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_12">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-list-tags --defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-tag <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-mark-next-changeset-ran">9.3.10. dbm-mark-next-changeset-ran</h4>
<div class="sect4">
<h5 id="_purpose_13">Purpose</h5>
<div class="paragraph">
<p>Mark the next change set as executed in the database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_13">Description</h5>
<div class="paragraph">
<p>If a filename is specified, writes the SQL that will perform the update that file but doesn&#8217;t update.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-mark-next-changeset-ran &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-mark-next-changeset-ran <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-register-changelog">9.3.11. dbm-register-changelog</h4>
<div class="sect4">
<h5 id="_purpose_14">Purpose</h5>
<div class="paragraph">
<p>Adds an include for the specified changelog to the main changelog.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_14">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-register-changelog &lt;&lt;filename&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the changelog file to include.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource using <code>changelog-&lt;&lt;dataSource&gt;&gt;.groovy</code> if a <code>filename</code> is not given. Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-diff  <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>
the suffix of <code>reports</code> will be used as the parameter value.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-release-locks">9.3.12. dbm-release-locks</h4>
<div class="sect4">
<h5 id="_purpose_15">Purpose</h5>
<div class="paragraph">
<p>Releases all locks on the database changelog.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_15">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-release-locks --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-release-locks <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-status">9.3.13. dbm-status</h4>
<div class="sect4">
<h5 id="_purpose_16">Purpose</h5>
<div class="paragraph">
<p>Outputs count or list of unrun change sets to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_16">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-status &lt;&lt;filename&gt;&gt; --verbose=&lt;&lt;verbose&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>verbose</code> - If <code>true</code> (the default) the changesets are listed; if <code>false</code> only the count is displayed</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>verbose</code>, <code>contexts</code>, <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-status <span class="string"><span class="delimiter">&quot;</span><span class="content">--verbose=&lt;&lt;verbose&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-tag">9.3.14. dbm-tag</h4>
<div class="sect4">
<h5 id="_purpose_17">Purpose</h5>
<div class="paragraph">
<p>Adds a tag to mark the current database state.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_17">Description</h5>
<div class="paragraph">
<p>Useful for future rollbacks to a specific tag (e.g. using the <a href="#ref-rollback-scripts-dbm-rollback">dbm-rollback</a> script).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-tag &lt;&lt;tagName&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tagName</code> - The name of the tag to use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>defaultSchema</code> and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-tag <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-maintenance-scripts-dbm-validate">9.3.15. dbm-validate</h4>
<div class="sect4">
<h5 id="_purpose_18">Purpose</h5>
<div class="paragraph">
<p>Checks the changelog for errors.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_18">Description</h5>
<div class="paragraph">
<p>Prints any validation messages to the console.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-validate --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em>.</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-validate <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-rollback-scripts">9.4. Rollback Scripts</h3>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-future-rollback-sql">9.4.1. dbm-future-rollback-sql</h4>
<div class="sect4">
<h5 id="_purpose_19">Purpose</h5>
<div class="paragraph">
<p>Writes SQL to roll back the database to the current state after the changes in the changeslog have been applied to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_19">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-future-rollback-sql &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-future-rollback-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-generate-changelog">9.4.2. dbm-generate-changelog</h4>
<div class="sect4">
<h5 id="_purpose_20">Purpose</h5>
<div class="paragraph">
<p>Generates an initial changelog XML or Groovy DSL file from the database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_20">Description</h5>
<div class="paragraph">
<p>Creates a Groovy DSL file if the filename is specified and it ends with .groovy. If another extension is specified it creates a standard Liquibase XML file, and if no filename is specified it writes to the console.</p>
</div>
<div class="paragraph">
<p>File are written to the migrations folder, so specify the filename relative to the migrations folder (<code>grails-app/migrations</code> by default).</p>
</div>
<div class="paragraph">
<p>Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-generate-changelog &lt;&lt;filename&gt;&gt; --diffTypes=&lt;&lt;diffTypes&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt; --add</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>diffTypes</code> - A comma-delimited list of change types to include - see <a href="http://www.liquibase.org/manual/diff#controlling_checks_since_1.8">the documentation</a> for what types are available</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
<li>
<p><code>add</code> - if specified add an include in the root changelog file referencing the new file</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>diffTypes</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-changelog <span class="string"><span class="delimiter">&quot;</span><span class="content">--diffTypes=&lt;&lt;diffTypes&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-generate-gorm-changelog">9.4.3. dbm-generate-gorm-changelog</h4>
<div class="sect4">
<h5 id="_purpose_21">Purpose</h5>
<div class="paragraph">
<p>Generates an initial changelog XML or Groovy DSL file from current GORM classes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_21">Description</h5>
<div class="paragraph">
<p>Creates a Groovy DSL file if the filename is specified and it ends with .groovy. If another extension is specified it creates a standard Liquibase XML file, and if no filename is specified it writes to the console.</p>
</div>
<div class="paragraph">
<p>File are written to the migrations folder, so specify the filename relative to the migrations folder (<code>grails-app/migrations</code> by default).</p>
</div>
<div class="paragraph">
<p>Executes against the database configured in <code>DataSource.groovy</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-generate-gorm-changelog &lt;&lt;filename&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt; --add</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
<li>
<p><code>add</code> - if specified add an include in the root changelog file referencing the new file</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-generate-gorm-changelog  <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback-count-sql">9.4.4. dbm-rollback-count-sql</h4>
<div class="sect4">
<h5 id="_purpose_22">Purpose</h5>
<div class="paragraph">
<p>Writes the SQL to roll back the specified number of change sets to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_22">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback-count-sql &lt;&lt;number&gt;&gt; &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>number</code> - The number of changesets to roll back</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback-count-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback-count">9.4.5. dbm-rollback-count</h4>
<div class="sect4">
<h5 id="_purpose_23">Purpose</h5>
<div class="paragraph">
<p>Rolls back the specified number of change sets</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_23">Description</h5>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback-count &lt;&lt;number&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>number</code> - The number of changesets to roll back</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback-count <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback-sql">9.4.6. dbm-rollback-sql</h4>
<div class="sect4">
<h5 id="_purpose_24">Purpose</h5>
<div class="paragraph">
<p>Writes SQL to roll back the database to the state it was in when the tag was applied to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_24">Description</h5>
<div class="paragraph">
<p>Requires that the named tag exists. You can create tags with the <a href="#ref-maintenance-scripts-dbm-tag">dbm-tag</a> script.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback-sql &lt;&lt;tagName&gt;&gt; &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tagName</code> - The name of the tag to use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback-to-date-sql">9.4.7. dbm-rollback-to-date-sql</h4>
<div class="sect4">
<h5 id="_purpose_25">Purpose</h5>
<div class="paragraph">
<p>Writes SQL to roll back the database to the state it was in at the given date/time to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_25">Description</h5>
<div class="paragraph">
<p>You can specify just the date, or the date and time. The date format must be <code>yyyy-MM-dd</code> and the time format must be <code>HH:mm:ss</code>.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback-to-date-sql &lt;&lt;date&gt;&gt; &lt;&lt;time&gt;&gt; &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>date</code> - The rollback date</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>time</code> - The rollback time</p>
</li>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback-to-date-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>,
the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback-to-date">9.4.8. dbm-rollback-to-date</h4>
<div class="sect4">
<h5 id="_purpose_26">Purpose</h5>
<div class="paragraph">
<p>Rolls back the database to the state it was in at the given date/time.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_26">Description</h5>
<div class="paragraph">
<p>You can specify just the date, or the date and time. The date format must be <code>yyyy-MM-dd</code> and the time format must be <code>HH:mm:ss</code>.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback-to-date &lt;&lt;date&gt;&gt; &lt;&lt;time&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>date</code> - The rollback date</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>time</code> - The rollback time</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be included</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback-to-date <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-rollback-scripts-dbm-rollback">9.4.9. dbm-rollback</h4>
<div class="sect4">
<h5 id="_purpose_27">Purpose</h5>
<div class="paragraph">
<p>Rolls back the database to the state it was in when the tag was applied.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_27">Description</h5>
<div class="paragraph">
<p>Requires that the named tag exists. You can create tags with the <a href="#ref-maintenance-scripts-dbm-tag">dbm-tag</a> script.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-rollback &lt;&lt;tagName&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tagName</code> - The name of the tag to use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-rollback <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-update-scripts">9.5. Update Scripts</h3>
<div class="sect3">
<h4 id="ref-update-scripts-dbm-previous-changeset-sql">9.5.1. dbm-previous-changeset-sql</h4>
<div class="sect4">
<h5 id="_purpose_28">Purpose</h5>
<div class="paragraph">
<p>Writes the SQL to STDOUT or a file for the specified number of previous changesets whether they have run or not.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_28">Description</h5>
<div class="paragraph">
<p>Generates SQL for the specifed number of changeSets from the changelog. Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-previous-changeset-sql &lt;&lt;number&gt;&gt; &lt;&lt;filename&gt;&gt; --skip=&lt;&lt;skip&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>number</code> - The number of un-run changesets to run</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>skip</code> - The number of changesets to skip if you want to exclude recent ones</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code> and <code>defaultSchema</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update-count-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-update-scripts-dbm-update-count-sql">9.5.2. dbm-update-count-sql</h4>
<div class="sect4">
<h5 id="_purpose_29">Purpose</h5>
<div class="paragraph">
<p>Writes the SQL that will partially update a database to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_29">Description</h5>
<div class="paragraph">
<p>Generates SQL for the specifed number of changeSets from the changelog. Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>This is useful for inspecting the generated SQL before running an update, or to generate SQL which can be tuned before running manually.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-update-count-sql &lt;&lt;number&gt;&gt; &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>number</code> - The number of un-run changesets to run</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update-count-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-update-scripts-dbm-update-count">9.5.3. dbm-update-count</h4>
<div class="sect4">
<h5 id="_purpose_30">Purpose</h5>
<div class="paragraph">
<p>Partially updates a database.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_30">Description</h5>
<div class="paragraph">
<p>Runs the specifed number of un-run changesets from the Changelog. Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-update-count &lt;&lt;number&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>number</code> - The number of un-run changesets to run</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update-count <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-update-scripts-dbm-update-sql">9.5.4. dbm-update-sql</h4>
<div class="sect4">
<h5 id="_purpose_31">Purpose</h5>
<div class="paragraph">
<p>Writes the SQL that will update the database to the current version to STDOUT or a file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_31">Description</h5>
<div class="paragraph">
<p>Generates SQL for all un-run changeSets from the changelog. Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>This is useful for inspecting the generated SQL before running an update, or to generate SQL which can be tuned before running manually.</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-update-sql &lt;&lt;filename&gt;&gt; --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>filename</code> - The path to the output file to write to. If not specified output is written to the console</p>
</li>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code>, <code>defaultSchema</code>, and <code>dataSource</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update-sql <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-update-scripts-dbm-update">9.5.5. dbm-update</h4>
<div class="sect4">
<h5 id="_purpose_32">Purpose</h5>
<div class="paragraph">
<p>Updates a database to the current version.</p>
</div>
</div>
<div class="sect4">
<h5 id="_description_32">Description</h5>
<div class="paragraph">
<p>Runs all un-run changeSets from the changelog. Executes against the database configured in <code>application.[yml|groovy]</code> for the current environment (defaults to <code>dev</code>).</p>
</div>
<div class="paragraph">
<p>Usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">grails &lt;&lt;environment&gt;&gt; dbm-update --contexts=&lt;&lt;contexts&gt;&gt; --defaultSchema=&lt;&lt;defaultSchema&gt;&gt; --dataSource=&lt;&lt;dataSource&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Required arguments: <em>none</em> .</p>
</div>
<div class="paragraph">
<p>Optional arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>contexts</code> - A comma-delimited list of <a href="http://www.liquibase.org/manual/contexts">context</a> names. If specified, only changesets tagged with one of the context names will be run</p>
</li>
<li>
<p><code>defaultSchema</code> - The default schema name to use</p>
</li>
<li>
<p><code>dataSource</code> - if provided will run the script for the specified dataSource.  Not needed for the default dataSource.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the <code>contexts</code> and <code>defaultSchema</code> parameter name and value must be quoted if executed in Windows, e.g.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">grails dbm-update <span class="string"><span class="delimiter">&quot;</span><span class="content">--contexts=&lt;&lt;contexts&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--defaultSchema=&lt;&lt;defaultSchema&gt;&gt;</span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content">--dataSource=&lt;&lt;dataSource&gt;&gt;</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the <code>dataSource</code> parameter, if the data source is configured as <code>reports</code> underneath the <code>dataSources</code> key in <code>application.[yml|groovy]</code>, the value should be <code>reports</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">--dataSource=reports</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.0.0-SNAPSHOT<br>
Last updated 2021-12-06 17:49:51 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>